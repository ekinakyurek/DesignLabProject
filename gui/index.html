<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=240, initial-scale=1">
    <title>I am a Mug</title>
    <link rel="stylesheet" type="text/css" href="jquery.fullPage.css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script type="text/javascript" src="jquery.fullPage.js"></script>
    <script type="text/javascript" src="fakeLoader.min.js"></script>
    <link rel="stylesheet" href="fakeLoader.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style type="text/css">
        div#WikiData0{
            text-align: center;
        }
        div#WikiData1{
            text-align: center;
        }
        div#header0 {
            height:28px;
            background:rgba(128, 128, 128, 0.6) ;
            width:100%;
            margin:0px auto;
            text-align: center;
        }
        div#header1 {
            height:28px;
            background: rgba(128, 128, 128, 0.6) ;
            width:100%;
            margin:0px auto;
            text-align: center;
        }
        p#info0 {
            font-size: 22px;
            vertical-align: middle;
            font-style: bold;
            font-family: "Verdana";
            color: #000;
        }
        p#info1 {
            font-size: 48px;
            font-style: bold;
            font-family: "Verdana";
            color: #000;
        }
        img{
            width: 80%;
            padding-top: 0;
            display: block;
            margin-top: 0;
            margin-left: auto;
            margin-right: auto;
        }

    </style>
    </head>
    <body>
        <div id="fakeLoader"></div>
        <script type="text/javascript">
            $(document).ready(function () {
                $('#fullpage').fullpage({
                    sectionsColor: ['#1bbc9b', '#4BBFC3'],
                    paddingBottom: '20px',
                    controlArrows: false,
                    scrollBar: true,
                    responsiveWidth: 400,
                    scrollingSpeed: 1000
                });
            });
            $("#fakeloader").fakeLoader({
                timeToHide:3600, //Time in milliseconds for fakeLoader disappear
                zIndex:"999",//Default zIndex
                spinner:"spinner1",//Options: 'spinner1', 'spinner2', 'spinner3', 'spinner4', 'spinner5', 'spinner6', 'spinner7'
                bgColor:"#2ecc71", //Hex, RGB or RGBA colors
                imagePath:"yourPath/customizedImage.gif" //If you want can you insert your custom image
            });
        </script>
        <script>
            'use strict'
            var ee = require('electron').ipcRenderer;
            var net = require('net');
            var remote = require('electron').remote;
            var countClick = 0;
            var countSlideLeft = 0;
            var countSlideRight = 0;
            var countMoveSectionUp = 0;
            var countMoveSectionDown = 0;
            var client = new net.Socket();
            var searchTerm = 'parrot';
            var yandexTanslateURL = "https://translate.yandex.net/api/v1.5/tr.json/translate?key=trnsl.1.1.20161109T203752Z.31a66f7b078518f9.4cfb304a7f2d5dadbb4aa80ac4261c70258e5816&text="+searchTerm+"&lang=tr-en&format=json"
            var onprocess = true;
            var searchTerm = "";
            var idCount=0;

            function myFunction(){
                remote.getGlobal('sharedObj').countSlideRight = countSlideRight++ ;
                console.log('button pressed')
                console.log(remote.getGlobal('sharedObj').countSlideRight)
            }
            

        ee.on("swipe-up,0", function (data) {
                //remote.getGlobal('sharedObj').countSlideRight = countSlideRight++ ;
                console.log("0:swipe_up gesture is called, velocity:" + data);
                $.fn.fullpage.moveSlideRight();
        });

        ee.on("swipe-down,0", function (data) {
                //remote.getGlobal('sharedObj').countSlideLeft = countSlideLeft++ ;
                console.log("0:swipe_down gesture is called, velocity:" + data);
                $.fn.fullpage.moveSlideLeft();
        });
        //Second potentiometer
        ee.on("swipe-up,1", function (data) {
                //remote.getGlobal('sharedObj').countMoveSectionUp = countMoveSectionUp++ ; 
                console.log("1:swipe_up gesture is called, velocity:" + data);
                $.fn.fullpage.moveSectionUp();
        });

        ee.on("swipe-down,1", function (data) {
                //remote.getGlobal('sharedObj').countMoveSectionDown = countMoveSectionDown++;
                console.log("1:swipe_down gesture is called, velocity:" + data);
                $.fn.fullpage.moveSectionDown();
        });

        ee.on("click-event,0", function (data) {
                   // remote.getGlobal('sharedObj').countClick = countClick++;
                    console.log("0:click detected at point:" + data);
            if (onprocess) {
                    client.connect(10000, '127.0.0.1', function () {
                        console.log('Connected');
                        client.write('Start');
                        onprocess = false;
                    });
                client.on('data', function (data) {
                    $("#fakeloader").fakeLoader();  
                    onprocess = false;
                    console.log('Received: ' + data);
                    searchTerm = data.toString();
                    remote.getGlobal('sharedObj').searchTerm.push({id: idCount, searchedTerm: searchTerm});
                    idCount++;
                    var KEY = 'AIzaSyDoTp6UicPtIH_JVy-cFwoebTEp9-rRHYE';
                    var CX = '007548910499588559159:lepkrgs8oig';
                    var count = '5';
                    var format = 'xml';
                    var startIndex = '1';
                    var url = "https://www.googleapis.com/customsearch/v1?q=" + searchTerm + "&num=" + count + "&start=" + startIndex + "&key=" + KEY + "&cx=" + CX + "&searchType=image";
                    var texturlTR = "https://tr.wikipedia.org/w/api.php?format=" + format + "&action=query&prop=extracts&exintro=&explaintext=&titles=" + searchTerm;
                    console.log(texturlTR)
                    var yandexTanslateURL = "https://translate.yandex.net/api/v1.5/tr.json/translate?key=trnsl.1.1.20161109T203752Z.31a66f7b078518f9.4cfb304a7f2d5dadbb4aa80ac4261c70258e5816&text="+searchTerm+"&lang=tr-en&format=json"
                    console.log(yandexTanslateURL)
                    // ----receive function----v
                    document.getElementById("info0").p = searchTerm;
                    $.getJSON(url, function (data) {
                        console.log(data)
                        for (var i = 0; i < 5; i++) {
                            console.log(data.items[i].link)
                        }
                        document.getElementById("img0").src = data.items[0].link;
                        document.getElementById("img1").src = data.items[1].link;
                        document.getElementById("img2").src = data.items[2].link;
                        document.getElementById("img3").src = data.items[3].link;
                        document.getElementById("img4").src = data.items[4].link;
                    });

                    $(function () {
                        $.ajax({
                            type: "get",
                            url: texturlTR,
                            dataType: "xml",
                            success: function (data) {
                                console.log(data)
                                $(data).find('api').each(function () {
                                    $(this).find("query").each(function () {
                                        $(this).find("pages").each(function () {
                                            $(this).find("page").each(function () {
                                                if($(this).find("missing")){
                                                        getWikiEN();
                                                } else {
                                                    $(this).find("extract").each(function () {
                                                        var description = $(this).text();
                                                        document.getElementById("WikiData0").innerHTML = description
                                                        console.log(description)
                                                    });
                                                }
                                            });
                                        });
                                    });
                                });
                            },
                            error: function (xhr, status) {
                                /* handle error here */
                                $("#show_table").html(status);
                            }
                        });
                    });

            function getWikiEN() {
                        $.getJSON(yandexTanslateURL, function (data) {
                        console.log(data)
                            var translation = data.text[0];
                            var texturlEN = "https://en.wikipedia.org/w/api.php?format=" + format + "&action=query&prop=extracts&exintro=&explaintext=&titles=" + translation;
                            $.ajax({
                            type: "get",
                            url: texturlEN,
                            dataType: "xml",
                            success: function (data) {
                                $(data).find('api').each(function () {
                                    $(this).find("query").each(function () {
                                        $(this).find("pages").each(function () {
                                            $(this).find("page").each(function () {
                                                $(this).find("extract").each(function () {
                                                    var description = $(this).text();
                                                    document.getElementById("WikiData0").innerHTML = description
                                                });
                                            });
                                        });
                                    });
                                });
                            },
                            error: function (xhr, status) {
                                /* handle error here */
                                $("#show_table").html(status);
                            }
                            });
                        });
                        
                    }

                    client.destroy(); // kill client after server's response
                });
            }
                    client.on('close', function () {
                        console.log('Connection closed');
                        onprocess = true
                    });
                });
            
    </script>

        <div id="fullpage">

            <div class="section active" id="section0">

                <div id="header0"><p id="info0">Hello</p></div>
                
                <div class="slide">
                    <div class="intro" id="WikiData0">
                        <p>Hello</p>
                        <button onclick="myFunction()">Click me</button>
                    </div>
                </div>
                <div class="slide">
                    <div class="intro">
                        <img class="img-responsive" id="img0" src="1.jpg" />
                    </div>
                </div>
                <div class="slide">
                    <div class="intro">
                        <img class="img-responsive" id="img1" src="1.jpg" />
                    </div>
                </div>
                <div class="slide">
                    <div class="intro">
                        <img class="img-responsive" id="img2" src="1.jpg" />
                    </div>
                </div>
                <div class="slide">
                    <div class="intro">
                        <img class="img-responsive" id="img3" src="1.jpg" />
                    </div>
                </div>
                <div class="slide">
                    <div class="intro">
                        <img class="img-responsive" id="img4" src="1.jpg" />
                    </div>
                </div>
            </div>

            <div class="section" id="section1">

                <div id="header0"><p id="info0">Hello</p></div>

                <div class="slide">
                    <div class="intro" id="WikiData1">
                        <p>Hello</p>
                    </div>

                <div class="slide">
                    <div class="intro">
                        <img class="img-responsive" id="img01" src="1.jpg" />
                    </div>
                </div>
                <div class="slide">
                    <div class="intro">
                        <img class="img-responsive" id="img11" src="1.jpg" />
                    </div>
                </div>
                <div class="slide">
                    <div class="intro">
                        <img class="img-responsive" id="img21" src="1.jpg" />
                    </div>
                </div>
                <div class="slide">
                    <div class="intro">
                        <img class="img-responsive" id="img31" src="1.jpg" />
                    </div>
                </div>
                <div class="slide">
                    <div class="intro">
                        <img class="img-responsive" id="img41" src="1.jpg" />
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
